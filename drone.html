<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drone Error Logger - Standalone</title>
</head>
<body>
    <h1>Drone Error Logger (Standalone, Console Only)</h1>
    <p>Open the browser console to see all logs.</p>

    <script>
        // Niz za čuvanje grešaka drona
        let droneErrors = [];

        // Funkcija za logovanje greške
        function logError(desc, type = 'ERROR') {
            const now = new Date();
            const error = {
                date: now.toLocaleString(),
                desc: desc,
                type: type
            };
            droneErrors.push(error);

            // Prikaz u konzoli
            if (type === 'ERROR') console.error(`[${type}] ${error.date}: ${error.desc}`);
            else console.warn(`[${type}] ${error.date}: ${error.desc}`);
        }

        // Funkcija za pregled svih grešaka
        function showErrors() {
            console.log("=== All Drone Errors ===");
            droneErrors.forEach(e => {
                if (e.type === 'ERROR') console.error(`${e.date}: ${e.desc}`);
                else console.warn(`${e.date}: ${e.desc}`);
            });
        }

        // Automatsko hvatanje JS grešaka
        window.onerror = function(message, source, lineno, colno, error) {
            logError(`${message} at ${source}:${lineno}:${colno}`, 'ERROR');
        };

        // Hvatanje unhandled promise rejections
        window.onunhandledrejection = function(event) {
            logError(`Unhandled promise rejection: ${event.reason}`, 'ERROR');
        };

        // Hvatanje upozorenja (override console.warn)
        const originalWarn = console.warn;
        console.warn = function(...args) {
            logError(args.join(' '), 'WARNING');
            originalWarn.apply(console, args);
        };

        // Primer simulacije grešaka (samo za test)
        // logError("Signal lost at 30 MHz");
        // console.warn("Battery low");
    </script>
</body>
</html>

