<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Drone Logger - GitHub Pages</title>
<style>
    body { font-family: Arial; background: #1a1a1a; color: #f0f0f0; padding: 20px; }
    input, select, button { padding: 8px; margin: 5px 0; border-radius: 5px; border: none; }
    button { background: #ff4c4c; color: white; cursor: pointer; }
    button:hover { background: #ff1a1a; }
    #logArea { margin-top: 20px; white-space: pre-wrap; background: #2a2a2a; padding: 10px; border-radius: 5px; max-height: 300px; overflow-y: auto; }
</style>
</head>
<body>
<h1>Drone Logger (GitHub Pages)</h1>
<p>Unesi grešku drona i klikni "Log Error". Sve se čuva lokalno u tvom browseru.</p>

<input type="text" id="errorInput" placeholder="Opis greške...">
<select id="errorType">
    <option value="ERROR">ERROR</option>
    <option value="WARNING">WARNING</option>
</select>
<button onclick="logDroneError()">Log Error</button>
<button onclick="showErrors()">Prikaži sve greške</button>
<button onclick="copyLogs()">Kopiraj sve greške</button>
<button onclick="clearLog()">Clear Log</button>

<div id="logArea"></div>

<script>
let droneErrors = JSON.parse(localStorage.getItem('droneErrors')) || [];

// Funkcija za prikaz loga na stranici i konzoli
function updateLogDisplay() {
    const logArea = document.getElementById('logArea');
    logArea.textContent = droneErrors.join('\n');
}

// Funkcija za logovanje greške
function logDroneError() {
    const desc = document.getElementById('errorInput').value.trim();
    if(!desc) return alert("Unesi opis greške!");

    const type = document.getElementById('errorType').value;
    const now = new Date();
    const logLine = `[${type}] ${now.toLocaleString()}: ${desc}`;
    droneErrors.push(logLine);
    localStorage.setItem('droneErrors', JSON.stringify(droneErrors));

    if(type === "ERROR") console.error(logLine);
    else console.warn(logLine);

    updateLogDisplay();
    document.getElementById('errorInput').value = '';
}

// Prikaz svih logova
function showErrors() {
    console.log("=== All Drone Errors ===");
    droneErrors.forEach(e => console.log(e));
    updateLogDisplay();
}

// Kopiranje logova u clipboard
function copyLogs() {
    const text = droneErrors.join('\n');
    navigator.clipboard.writeText(text)
        .then(() => alert("Greške kopirane u clipboard!"))
        .catch(err => alert("Greške se ne mogu kopirati: " + err));
}

// Brisanje loga
function clearLog() {
    if(confirm("Da li želiš da obrišeš sve logove?")) {
        droneErrors = [];
        localStorage.removeItem('droneErrors');
        updateLogDisplay();
        console.clear();
    }
}

// Prikaz prethodnih logova pri učitavanju stranice
updateLogDisplay();
</script>
</body>
</html>
