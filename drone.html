<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Drone Logger - Colored Embedded Console</title>
<style>
    body { font-family: Arial; background: #1a1a1a; color: #f0f0f0; padding: 20px; }
    #console { background: #2a2a2a; padding: 10px; border-radius: 5px; height: 300px; overflow-y: auto; white-space: pre-wrap; font-family: monospace; }
    input, select, button { padding: 6px; margin: 5px 0; border-radius: 5px; border: none; }
    button { background: #ff4c4c; color: white; cursor: pointer; }
    button:hover { background: #ff1a1a; }
    .ERROR { color: #ff4c4c; }
    .WARNING { color: #ffaa00; }
    .INFO { color: #00ccff; }
</style>
</head>
<body>
<h1>Drone Logger - Embedded Colored Console</h1>
<p>Greške drona se prikazuju ovde. Možeš unositi greške ili komande.</p>

<input type="text" id="commandInput" placeholder="Unesi grešku ili komandu">
<select id="errorType">
    <option value="ERROR">ERROR</option>
    <option value="WARNING">WARNING</option>
</select>
<button onclick="executeCommand()">Log / Run</button>
<button onclick="clearConsole()">Clear Console</button>
<button onclick="copyLogs()">Copy Logs</button>

<div id="console"></div>

<script>
let droneErrors = [];

// Funkcija za prikaz loga u embedded konzoli sa bojama
function updateConsole() {
    const consoleDiv = document.getElementById('console');
    consoleDiv.innerHTML = droneErrors.map(e => {
        if(e.startsWith('[ERROR]')) return `<span class="ERROR">${e}</span>`;
        if(e.startsWith('[WARNING]')) return `<span class="WARNING">${e}</span>`;
        return `<span class="INFO">${e}</span>`;
    }).join('\n');
    consoleDiv.scrollTop = consoleDiv.scrollHeight;
}

// Funkcija koja loguje grešku ili izvršava komandu
function executeCommand() {
    const input = document.getElementById('commandInput').value.trim();
    if(!input) return;

    // Komande počinju sa "/"
    if(input.startsWith("/")) {
        const cmd = input.slice(1).toLowerCase();
        if(cmd === "show") {
            droneErrors.push(`[INFO] ${new Date().toLocaleString()}: Prikaz svih logova`);
        } else if(cmd === "clear") {
            droneErrors = [];
        } else {
            droneErrors.push(`[WARNING] ${new Date().toLocaleString()}: Nepoznata komanda ${cmd}`);
        }
    } else {
        const type = document.getElementById('errorType').value;
        const now = new Date();
        const logLine = `[${type}] ${now.toLocaleString()}: ${input}`;
        droneErrors.push(logLine);
    }

    document.getElementById('commandInput').value = '';
    updateConsole();
}

// Dugme za čišćenje konzole
function clearConsole() {
    droneErrors = [];
    updateConsole();
}

// Dugme za kopiranje loga u clipboard
function copyLogs() {
    const text = droneErrors.join('\n');
    navigator.clipboard.writeText(text)
        .then(() => alert("Greške kopirane u clipboard!"))
        .catch(err => alert("Greške se ne mogu kopirati: " + err));
}

// Prikaz prethodnih logova pri učitavanju
updateConsole();
</script>
</body>
</html>
